<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body class="easyui-layout" data-options="fit:false">
    <script type="text/javascript">
        var onClick = function (checkbox) {
            var cameraItem;
            var findFlag = false;
            for (var i = 0; i < cameraDataJson.length; i++) {
                if ((checkbox.id == "Z" + cameraDataJson[i].id) || (checkbox.id == "F" + cameraDataJson[i].id)) {
                    cameraItem = cameraDataJson[i];
                    findFlag = true;
                    break;
                }
            }
            if (!findFlag) {
                return;
            }
            if (!activeFlag) {
                return;
            }
            var cameraItemJson = JSON.stringify(cameraItem)
            if (checkbox.checked) {
                activeX.AddCamera(cameraItemJson);
            } else {
                activeX.DeleteCamera(cameraItemJson);
            }
        }


        //选框主
        var setCheckZ = function (value, row, index) {
            if (row.master_id == "" || row.master_id == "0") {
                return '无';
            }
            else if (row.checked) {
                return '<input id="Z' + row.master_id + '" name="checkZ" type="checkbox" checked="checked"  onclick="onClick(this)">';
            } else {
                return '<input id="Z' + row.master_id + '" name="checkZ" type="checkbox" onclick="onClick(this)" >';
            }
        }

        //选框副
        var setCheckF = function (value, row, index) {
            if (row.sencond_id == "" || row.sencond_id == "0") {
                return '无';
            }
            else if (row.checked) {
                return '<input id="F' + row.sencond_id + '" name="checkF" type="checkbox" checked="checked" onclick="onClick(this)">';
            } else {
                return '<input id="F' + row.sencond_id + '" name="checkF" type="checkbox" onclick="onClick(this)" >';
            }
        }
       
    </script>
    <div id="divSouth" data-options="region:'south',collapsible:true,split:true" title="门列表"
        style="height: 220px;">
        <table id="tbDoor" class="easyui-datagrid" data-options="rownumbers:true,singleSelect:true,fitColumns:true,striped:true,pagination:true,pageSize:5,pageList:[5,10,20,50,100],selectOnCheck:false">
            <thead>
                <tr>
                    <th data-options="field:'master_id',align:'center',formatter:setCheckZ" width="80">
                        主相机
                    </th>
                    <th data-options="field:'sencond_id',align:'center',formatter:setCheckF" width="80">
                        副相机
                    </th>
                    <th data-options="field:'door_name',align:'center'" width="80">
                        门名
                    </th>
                    <th data-options="field:'control_name',align:'center'" width="100">
                        控制器
                    </th>
                    <th data-options="field:'display_name',align:'center'" width="80">
                        显示器名
                    </th>
                    <th data-options="field:'user_name',align:'center'" width="80">
                        用户
                    </th>
                    <th data-options="field:'door_num',align:'center'" width="150">
                        门数量
                    </th>
                </tr>
            </thead>
        </table>
    </div>
    <div title="监控相机" id="divCenter" data-options="region:'center',border:true, collapsible:false,split:false"
        style="padding: 0px;">
        <object id="ActiveX" type="application/x-itst-activex" classid="clsid:7CD5FC65-64EB-43C8-A696-029D18367999"
            codebase="ActiveXCamera.CameraControl#version=1,0,0,0" width="100%">
        </object>
    </div>
    <link rel="stylesheet" type="text/css" href="../../Scripts/jquery-easyui/themes/default/easyui.css" />
    <link rel="stylesheet" type="text/css" href="../../Scripts/jquery-easyui/themes/icon.css" />
    <link href="../../Scripts/jquery-easyui/themes/IconExtension.css" rel="stylesheet"
        type="text/css" />
    <link href="../css/XFullHtml.css" rel="stylesheet" type="text/css" />
    <link href="../../Scripts/jquery-easyui/themes/IconExtension.css" rel="stylesheet"
        type="text/css" />
    <script src="../../Scripts/jquery-easyui/jquery.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery-easyui/jquery.easyui.min.js" type="text/javascript"></script>
    <script src="../../Scripts/common.js" type="text/javascript"></script>
    <script type="text/javascript">
        XCommon.loadScript("../../Scripts/jquery/ajaxfileupload.js", function () {
            XCommon.loadScript("../../Scripts/jquery.cookie.js", function () {
                XCommon.loadScript("../../Scripts/global.js", function () {
                    XCommon.loadScript("../../Scripts/constant.js", function () {
                        XCommon.loadScript("../../Scripts/json2.js", function () {
                            XCommon.loadScript("../../Scripts/jquery-easyui/locale/easyui-lang-zh_CN.js", function () {
                                XCommon.loadScript("js/PKRealTimeMonitoring.js");
                            })
                        })
                    })
                })
            })
        })

       

        
    </script>
</body>
</html>
